# 캐시 메모리

CPU는 메모리에 자주 접근하는데, 접근하는 데 걸리는 시간을 줄이기 위해서 사용하는 것이 캐시 메모리이다.

저장 장치 계층 구조를 통해서 정리해서 보면,
CPU로부터 멀수록 데이터 접근속도가 느린 편이다.

가까울수록 저장용량이 작고, 비싸지만 접근속도가 빠르다.

CPU에 가까운 순으로 정리하면 레지스터 - 캐시메모리 - 메모리 - 보조기억장치 순으로 정리할 수 있다.

캐시메모리는 CPu와 메모리 사이에 위치하고, 레지스터보다는 용량이 크고, 메모리보다는 조금 빠르다.

캐시 메모리도 3개의 종류로 나뉜다. CPU에 가까운 순으로 L1, L2, L3 캐시로 나누어진다.
L1, L2는 CPU 코어 안에 있고 L3만 밖에 있다. 그리고 데이터 탐색도 L1부터 먼저 한다. (데이터가 없을 경우 L2- L3 순으로 찾아 나간다)
L3는 여러 코어가 공유한다.

분리형 캐시: 조금이라도 접근속도를 빠르게 하기 위해 명령어만 저장하는 L1I 캐시, 데이터만 저장하는 L1D 캐시로 분리하기도 한다

## 참조지역성의 원리

CPU가 자주 참조하고 사용할 법한 데이터를 캐시에 저장해둔다.

캐시가 예측하여 저장해둔 데이터를 CPU가 사용할 확률을 캐시 히트율이라고 한다. 그 반대를 캐시 미스라고 한다.
보통 캐시 히트율은 80-95% 사이인데, 이렇게 높을 수 있는 이유는

1. 한번 선언한 변수를 자주 찾아 사용하는 CPU특성, 즉 최근 접근했던 메모리 공간에 다시 접근하려는 경향이 있다.
2. 관련된 명령어와 데이터는 한 곳에 모여 관리되는 프로그램의 특성 때문이다. 즉, 접근한 메모리 공간 근처를 접근한다.
