# 운영체제

커널: 운영체제의 핵심 서비스를 담당하는 부분이다.

운영체제가 제공하는 서비스 중 커널에 포함되지 않는 서비스들 중 대표적인 게 사용자 인터페이스이다.
예) 그래픽 인터페이스, 터미널

- 이중 모드와 시스템 호출
  응용 프로그램들은 오직 운영체제를 통해서만 시스템 자원에 접근해야 한다.
  따라서 이중모드라는 개념을 사용한다.
  이중 모드란 CPU가 명령어를 실행하는 모드를 크게 사용자 모드와 커널 모드로 구분하는 방식이다.
  CPU는 명령어를 사용자 모드로써 실행할 수 있고, 커널 모드로써 실행할 수 있다.
  사용자 모드는 운영채재 서비스를 제공받을 수 없는 실행모드이다.
  즉 커널영역의 코드를 실행할 수 없음
  일반적으로 응용프로그램은 기본적으로 사용자 모드로 실행된다.
  사용자 모드로 실행중인 CPU는 입출력 명령어와 같이 하드웨어 자원에 접근하는 명령어를 실행할 수 없음
  커널모드: 운영체제 서비스를 제공받을 수 있는 실행모드.
  커널 영역의 코드를 실행할 수 있다.

CPU가 사용자 모드로 실행중인지 커널모드로 실행중인지는 플래그 레지스터 속 슈퍼바이저 플래그를 보고 알 수 있다.
운영체제 서비스를 제공받으려면, 커널 모드로 전환해야 한다. 이런 요청을 시스템 호출이라고 한다.

사용자 모드로 실행되는 프로그램은 시스템 호출을 통해서 커널모드로 바꾸고 운영체제 서비스를 제공받을 수 있다.
시스템 호출은 인터럽트이다.
소프트웨어 인터럽트는 인터럽트를 발생시키는 명령어이다.

호출 발생 시 CPU에서 지금까지의 작업을 백업 => 인터럽트 서비스 루틴을 실행 => 기존에 실행하던 응용프로그램으로 복귀

# 운영체제의 핵심서비스

프로세스 관리
자원 접근 및 할당
파일시스템 관리

# 가상머신

이 역시 응용프로그램이기 때문에 사용자 모드로 작동한다, 하지만 운영체제 서비스를 제공받아야 하기때문에
가상머신이 가능한 CPU는 하이퍼바이저 모드를 제공, 가상머신에 설치된 운영체제로부터 운영체제 서비스를 제공받을 수 있다.

# 시스템 호출의 종류

프로세스 관리: fork, execve, exit, waitpid
파일 관리: open, close, read, write, stat
디렉터리 관리: chdir, mkdir, rmdir
파일시스템 관리: mount, unmount
