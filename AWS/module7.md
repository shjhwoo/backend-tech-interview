# 메세지 및 대기열

어플리케이션 간의 통신: 원활하게 작용

이때 통신 내용은 대기열에다가 둔다. => 소결합을 유지하여 장애 확산을 방지한다.

- AWS SNS: 메세지를 전달할 채널을 만들고 필요한 사용자가 이를 구독한다.
  Amazon Simple Notification Service(Amazon SNS)

Amazon Simple Notification Service(Amazon SNS)는 게시 및 구독 서비스입니다. 게시자는 Amazon SNS 주제를 사용하여 구독자에게 메시지를 게시합니다. 이는 커피숍에서 계산원이 음료를 만드는 바리스타에게 주문 사항을 전달하는 것과 비슷합니다.

Amazon SNS에서 구독자는 웹 서버, 이메일 주소, AWS Lambda 함수 또는 그 밖의 여러 옵션이 될 수 있습니다.
이제 구독자는 구독한 특정 주제에 대해서만 즉시 업데이트를 받게 됩니다.
구독자는 주제를 하나 또는 여러 개 구독할 수 있습니다.

- AWS SQS: 규모 무관하게 메세지 수신 저장 전송가능. (메세지 버퍼이다. 페이로드가 메세지 데이터이다.)
  Amazon Simple Queue Service(Amazon SQS)는 메시지 대기열 서비스입니다.

Amazon SQS를 사용하면 메시지 손실이나 다른 서비스 사용 없이 소프트웨어 구성 요소 간에 메시지를 전송, 저장, 수신할 수 있습니다. Amazon SQS에서는 애플리케이션이 메시지를 대기열로 전송합니다. 사용자 또는 서비스는 대기열에서 메시지를 검색하여 처리한 후 대기열에서 삭제합니다.
계산원과 바리스타가 애플리케이션의 2가지 개별 구성 요소라는 점을 떠올리십시오. Amazon SQS와 같은 메시지 대기열 서비스를 사용하면 분리된 애플리케이션 구성 요소 간에 메시지를 사용할 수 있습니다.

이 예에서 프로세스의 첫 번째 단계는 이전과 동일합니다. 즉, 고객이 계산원에게 주문합니다.

계산원이 주문을 대기열에 넣습니다. 이를 계산원과 바리스타 사이의 버퍼 역할을 하는 주문판이라고 생각할 수 있습니다. 바리스타가 쉬는 시간이거나 다른 주문으로 바쁘더라도 계산원은 계속해서 새 주문을 대기열에 넣을 수 있습니다.

다음으로 바리스타가 대기열을 확인하고 주문을 검색합니다.

바리스타가 음료를 만들어 고객에게 제공합니다.

바리스타는 완료된 주문을 대기열에서 제거합니다.

바리스타가 음료를 만드는 동안 계산원은 계속 새로운 주문을 받아 대기열에 추가할 수 있습니다.
